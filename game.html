<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <style>
    .main {
      width: 100%;
      height: 90vh;
      background-color: burlywood;
      border-radius: 1em;
      position: relative;
    }

    .ball {
      width: 100px;
      height: 100px;
      border-radius: 5em;
      background-color: red;
      position: absolute;
      border: 5px solid yellow;
      box-sizing: border-box;
    }


    input {
      margin: 1em;
    }
  </style>
</head>


</style>
</head>

<body>
  <input type="number" min="0" max="100" id="txt" placeholder="width" onkeyup="moveTo(x,y)">
  <input type="number" min="0" max="100" id="txt2" placeholder="height" onkeyup="random()">
  <input type="button" onclick="createBall(23,45)" value="create">
  <p id="set"></p>
  <div class="main"></div>
</body>
<script>

  var numberOfBalls = 0;
 

  function createBall(startX, startY) {

    // create the ball div in dom 
    // <div class="ball-0" ></div>
    var newBall = document.createElement("div");
    var main = document.getElementsByClassName('main')[0];
    newBall.className = "ball ball-" + numberOfBalls;
    main.appendChild(newBall);

    // numberOfBalls++ 
    var ballIndex = main.childElementCount;

    // the rest ///chii hast ?
    //var ballName = "<div class= " + '"' + "ball" + " " + "ball-" + "[" + ballIndex + "]" + '"' + ">" + "</div>"
    // var balltag = "<div class= " + '"' + "ball" + '"' + "onload=" + '"' + "moveTo(startX, startY," + "(" + ballIndex + ")" + ")" + '"' + ">" + "</div>"

    // console.log(balltag);


    startX = 0;
    startY = 0;


  addition = 0.9;
  directionX = 1;
  directionY = 1;


  currentX = 30;
  currentY = 70;


    setInterval(function () {

      currentX = currentX + (directionX * addition);
      currentY = currentY + (directionY * addition);


      if (currentX <= 0 || currentX >= 100) {
        directionX = directionX * -1;
      }

      if (currentY <= 0 || currentY >= 100) {
        directionY = directionY * -1;
      }


      moveTo(currentX, currentY, numberOfBalls );

      // moveTo(currentX, currentY, ballIndex);
    

    }, 40);

    numberOfBalls ++;

  }


  function moveTo(x, y, ballIndex) {

    ballIndex--;

    var ballWidth = document.getElementsByClassName("ball-" + ballIndex)[0].clientWidth;
    var containerWidth = document.getElementsByClassName("main")[0].clientWidth;
    var widthPercent = (containerWidth - ballWidth) / containerWidth;
    document.getElementsByClassName("ball-" + ballIndex)[0].style.left = x * widthPercent + "%";

    var ballheight = document.getElementsByClassName("ball-" + ballIndex)[0].clientHeight;
    var containerheight = document.getElementsByClassName("main")[0].clientHeight;
    var heightPercent = (containerheight - ballheight) / containerheight;


    document.getElementsByClassName("ball-" + ballIndex)[0].style.top = y * heightPercent + "%";

   // document.getElementsByClassName("ball")[ballIndex].style.top = y * heightPercent + "%";
    //document.getElementsByClassName("ball")[ballIndex].style.top = x * widthPercent + "%";


  }

 

  setInterval(changeColor, 1000);

  var allowedColors = ['#ff0000', '#00ff00', '#0000ff', '#ff00ff', '#ffff00', '#00ffff', '#ffffff'];
  currentColor = ''

  function changeColor() {


    var randomColor = allowedColors[Math.floor(Math.random() * allowedColors.length)];
    //console.log(randomColor + ' >>> ' + currentColor);

    if (randomColor == currentColor) {
      //console.log('ranj techrari ast')
    }

    while (randomColor === currentColor) {
      // ye colore random jadid ijad kon beriz to randomColor    
      randomColor = allowedColors[Math.floor(Math.random() * allowedColors.length)];

    }


    document.getElementsByClassName("ball")[0].style.background = randomColor;
    currentColor = randomColor;





  }




</script>

</html>